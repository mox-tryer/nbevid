---
layout: post
title:  "Verzia 0.1.4"
date:   2016-10-29 12:59:00 +0200
categories: nbevid version
---

Toto je prva pouzitelna verzia, ktoru sa aj mne podarilo nainstalovat a spustit. Instalacne programy je mozne najst [tu][v0.1.4]. Postup instalacie je [tu]({{ site.baseurl }}{% link install.md%}). Navod na pracu je [tu]({{ site.baseurl }}{% link guide/index.md%}).

## Funcionalita

Obsahuje len zakladne moznosti:

* vytvaranie databazy
* otvaranie databazy
* ukladanie databazy
* pridavanie, editovanie a odmazavanie poloziek v databaze
* pridavanie rokov
* editovanie hodnot poloziek v mesiacoch
  
Chybajuca funkcionalita:

* zatial nie je mozne vybrat si, ktore polozky sa maju priradit do roku
* chyba moznost tlace

### Praca s databazou

Praca s databazou je viac-menej hotova. Pre vytvorenie databazy staci vybrat adresar, kde bude ulozena a meno databazy. Program si pamata otvorene databazy a pri najblizsom spusteni sa ich pokusi znovu otvorit. Je tu ale aj moznost rucne otvorit databazu tak,
ze sa vyberie adresar, kde je databaza ulozena. Co mozno este chyba je moznost zatvorenia databazy a moznost vymazania databazy.

Databaza je ukladana ako jeden hlavny subor (eviddb.json) a pre kazdy rok samostatny subor (napriklad year2016.json). Takto som sa rozhodol kvoli tomu, aby sa zbytocne nenatahovali do pamate vsetky roky, ked bude databaza velka, ale len tie, ktore "rozkliknes". 
V hlavnom subore je definicia poloziek a zoznam rokov, ktore patria do databazy. V subore pre rok je zoznam poloziek, ktore sa mozu v danom roku pouzivat a zoznam hodnot pre polozky v jednotlivych mesiacoch.

Na urovni databazy je mozne pridavat nove polozky a menit existujucim polozkam nazov (to sa prejavi vo vsetkych rokoch, ktore danu polozku pouzivaju!). Je mozne aj odmazat tie polozky, ktore nie su pouzite v ziadnom roku.

Pri kazdom ukladani databazy sa zachova predchadzajuca verzia menenych suborov s priponou `.bak`.

#### Mozne problemy pri praci s databazou

Pri testovani som narazil na nasledovny problem:

1. vytvoril som databazu
2. vypol som program
3. vymazal som rucne databazu na disku
4. zapol som program - ten sa pokusil otvorit databazu, ktoru mal zapamatanu ale nepodarilo sa mu to, takze nezobrazil ziadnu databazu
5. vytvoril som novu databazu s rovnakym menom a adresarom ako mala prva
6. program zobrazil databazu dvakrat

Toto bolo sposobene tym, ze som to napogramoval tak, ze ked sa pri spusteni nepodari otvorit zapamatanu databazu, program to potichu odignoruje (nevyhlasi chybu) - predpoklad je, ze databaza bola odmazana. Co som ale nenaprogramoval je to, aby program na takto
zapamatanu databazu "zabudol". Takze ked som vytvoril novu databazu s rovnakym meno a adresarom, mal ju uz zapamatanu dvakrat a aj ju dvakrat zobrazil.

Toto budem musiet vyriesit bud tak, ze pri neuspesnom otvoreni "zabudne" na danu databazu, alebo tak, ze unikatnost bude dana adresarom, takze aj po vytoreni nove databazy v povodnom adresari by sa zobrazila len raz.

### Praca s rokmi

Plan je, ze pri vytvarani roku sa budu moct vybrat, ktore zo vsetkych poloziek, ktore ma databaza k dispozicii sa maju do noveho roku priradit. Takisto im bude mozne urcit lubovolne poradie, ktore sa pouzije ako pri zobrazeni v programe
(ked sa edituju polozky v mesiaci), aj v tlacovom reporte. Aj v existujucom roku, ktory uz ma nejake mesiace vyplnene, bude mozne pridavat nove polozky a menit ich poradie. Dokonca bude mozne aj odobrat polozku, ktora zatial nema ziadnu
sumu v ziadnom mesiaci.

Vzhladom na casovu narocnost som takyto editor zatial do prvej verzie nedal. Program sa momentalne sprava tak, ako keby si si pri vytvarani roku vybrala vsetky polozky v databaze a v takom poradi ako boli do databazy pridavane.

### Praca s mesiacmi

Sumy sa daju do poloziek pripocitavat, alebo nastavovat (ak treba nejaku polozku uplne opravit).


#### Mozne problemy pri editovani poloziek v mesiaci

Ak bude program bezat v slovencine (poznas to podla toho, ze niektore texty (ako napriklad nazvy mesiacov) budu v slovencine), tak oddelovac desatinnych miest **MUSI byt ciarka**. Ak v anglictine, oddelovac **MUSI byt bodka**. 
Pokusim sa toto opravit tak, aby aj v slovencine bolo mozne pouzivat bodku (ak by bola ciarka problem). Editor penaznej hodnoty sa momentalne sprava tak, ze znaky, ktore nie su spravne odignoruje. Cize v slovencine ignoruje, ak bola stlacena dvojka. 
A ak teda v slovencine stlacis klavesy `1`, `0`, `.`, `5`, tak namiesto hodnoty `10,50` sa zobrazi `105,00`. Druha vec je, ze cislo sa aj pocas editacie zobrazuje vzdy s dvomi desatinnymi miestami.
  

[v0.1.4]: https://github.com/mox-tryer/nbevid/releases/tag/v0.1.4
